import Web3 from 'web3';
var contract_abi = [{"constant":false,"inputs":[],"name":"markVoid","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"id","type":"string"},{"name":"purchase","type":"string"},{"name":"temp","type":"string"}],"name":"setOrderDetails","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"v","type":"string"},{"name":"d","type":"string"}],"name":"setOrderValue","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"id","type":"string"}],"name":"getShipmentDetails1","outputs":[{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"descr","type":"string"},{"name":"buyr","type":"string"},{"name":"freight","type":"string"}],"name":"setBuyer","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"signContract","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"id","type":"string"}],"name":"getShipmentDetails2","outputs":[{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"bool"},{"name":"","type":"bool"}],"payable":false,"type":"function"}]
var deployContract = function(id,callback){
var web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
web3.eth.defaultAccount = web3.eth.accounts[id];
var supply_contract_sol_supply_chainContract = web3.eth.contract(contract_abi);

var supply_contract_sol_supply_chain = supply_contract_sol_supply_chainContract.new(
   {
     from: web3.eth.accounts[id], 
     data: '0x6060604052341561000c57fe5b5b61105b8061001c6000396000f30060606040523615610081576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806330cd7ead146100835780635c1cb410146100955780637dda792214610175578063918f251f14610212578063b2acf9cc14610555578063b8b4f1a014610635578063fde23b7f14610647575bfe5b341561008b57fe5b610093610832565b005b341561009d57fe5b610173600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610850565b005b341561017d57fe5b610210600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919050506108b6565b005b341561021a57fe5b61026a600480803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919050506108e9565b6040518080602001806020018060200180602001806020018060200187810387528d8181518152602001915080519060200190808383600083146102cd575b8051825260208311156102cd576020820191506020810190506020830392506102a9565b505050905090810190601f1680156102f95780820380516001836020036101000a031916815260200191505b5087810386528c818151815260200191508051906020019080838360008314610341575b8051825260208311156103415760208201915060208101905060208303925061031d565b505050905090810190601f16801561036d5780820380516001836020036101000a031916815260200191505b5087810385528b8181518152602001915080519060200190808383600083146103b5575b8051825260208311156103b557602082019150602081019050602083039250610391565b505050905090810190601f1680156103e15780820380516001836020036101000a031916815260200191505b5087810384528a818151815260200191508051906020019080838360008314610429575b80518252602083111561042957602082019150602081019050602083039250610405565b505050905090810190601f1680156104555780820380516001836020036101000a031916815260200191505b5087810383528981815181526020019150805190602001908083836000831461049d575b80518252602083111561049d57602082019150602081019050602083039250610479565b505050905090810190601f1680156104c95780820380516001836020036101000a031916815260200191505b50878103825288818151815260200191508051906020019080838360008314610511575b805182526020831115610511576020820191506020810190506020830392506104ed565b505050905090810190601f16801561053d5780820380516001836020036101000a031916815260200191505b509c5050505050505050505050505060405180910390f35b341561055d57fe5b610633600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610ce3565b005b341561063d57fe5b610645610d2e565b005b341561064f57fe5b61069f600480803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610d4c565b60405180806020018060200180602001861515151581526020018515151515815260200184810384528981815181526020019150805190602001908083836000831461070a575b80518252602083111561070a576020820191506020810190506020830392506106e6565b505050905090810190601f1680156107365780820380516001836020036101000a031916815260200191505b5084810383528881815181526020019150805190602001908083836000831461077e575b80518252602083111561077e5760208201915060208101905060208303925061075a565b505050905090810190601f1680156107aa5780820380516001836020036101000a031916815260200191505b508481038252878181518152602001915080519060200190808383600083146107f2575b8051825260208311156107f2576020820191506020810190506020830392506107ce565b505050905090810190601f16801561081e5780820380516001836020036101000a031916815260200191505b509850505050505050505060405180910390f35b6001600860006101000a81548160ff0219169083151502179055505b565b8160019080519060200190610866929190610f76565b50826000908051906020019061087d929190610f76565b508060029080519060200190610894929190610f76565b506000600860006101000a81548160ff0219169083151502179055505b505050565b81600690805190602001906108cc929190610f76565b5080600790805190602001906108e3929190610f76565b505b5050565b6108f1610ff6565b6108f9610ff6565b610901610ff6565b610909610ff6565b610911610ff6565b610919610ff6565b600060016002600360046004858054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156109ba5780601f1061098f576101008083540402835291602001916109ba565b820191906000526020600020905b81548152906001019060200180831161099d57829003601f168201915b50505050509550848054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610a565780601f10610a2b57610100808354040283529160200191610a56565b820191906000526020600020905b815481529060010190602001808311610a3957829003601f168201915b50505050509450838054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610af25780601f10610ac757610100808354040283529160200191610af2565b820191906000526020600020905b815481529060010190602001808311610ad557829003601f168201915b50505050509350828054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610b8e5780601f10610b6357610100808354040283529160200191610b8e565b820191906000526020600020905b815481529060010190602001808311610b7157829003601f168201915b50505050509250818054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610c2a5780601f10610bff57610100808354040283529160200191610c2a565b820191906000526020600020905b815481529060010190602001808311610c0d57829003601f168201915b50505050509150808054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610cc65780601f10610c9b57610100808354040283529160200191610cc6565b820191906000526020600020905b815481529060010190602001808311610ca957829003601f168201915b505050505090509550955095509550955095505b91939550919395565b8260039080519060200190610cf9929190610f76565b508160049080519060200190610d10929190610f76565b508060059080519060200190610d27929190610f76565b505b505050565b6001600860016101000a81548160ff0219169083151502179055505b565b610d54610ff6565b610d5c610ff6565b610d64610ff6565b60006000600560066007600860009054906101000a900460ff16600860019054906101000a900460ff16848054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610e235780601f10610df857610100808354040283529160200191610e23565b820191906000526020600020905b815481529060010190602001808311610e0657829003601f168201915b50505050509450838054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610ebf5780601f10610e9457610100808354040283529160200191610ebf565b820191906000526020600020905b815481529060010190602001808311610ea257829003601f168201915b50505050509350828054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610f5b5780601f10610f3057610100808354040283529160200191610f5b565b820191906000526020600020905b815481529060010190602001808311610f3e57829003601f168201915b50505050509250945094509450945094505b91939590929450565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610fb757805160ff1916838001178555610fe5565b82800160010185558215610fe5579182015b82811115610fe4578251825591602001919060010190610fc9565b5b509050610ff2919061100a565b5090565b602060405190810160405280600081525090565b61102c91905b80821115611028576000816000905550600101611010565b5090565b905600a165627a7a72305820611eecebb7c51ead5f02feb16110d5a3f280bb0f248dc6ff89599d65261913340029', 
     gas: '47000000'
   }, function (e, contract){
    console.log(e, contract);
    if (typeof contract.address !== 'undefined') {
         console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
         localStorage.setItem('address',contract.address);
         localStorage.setItem('tx',contract.transactionHash);
         callback(contract.address);
    }
 })
}

export { deployContract,contract_abi }; 
